/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/**
 * @license RequireJS text 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("settings",[],function(){var e=1.5,t={width:960/e,height:720/e};return{factor:e,renderWindowSize:t,renderAspectRatio:t.width/t.height,portalDepth:36,portalSize:100,worldSize:{width:60,height:60},warpHoleColumns:11,warpHoleRows:11,frameSize:9.09,FLARThreshold:64}}),define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),define("display",["domReady!","./settings"],function(e,t){var n=document.getElementById("display"),r=new THREE.WebGLRenderer({canvas:n});r.setSize(t.renderWindowSize.width,t.renderWindowSize.height),r.autoClear=!1;var i=function(){r.context.colorMask(!1,!1,!1,!1),r.context.depthMask(!0)},s=function(){r.context.colorMask(!0,!0,!0,!0)},o={mouseListener:undefined,beginOccluderRendering:i,endOccluderRendering:s,renderer:r},u=function(e){var t=e.pageX-r.domElement.offsetLeft,n=e.pageY+r.domElement.offsetTop-25,i=t/r.domElement.width*2-1,s=-(n/r.domElement.height)*2+1;return new THREE.Vector3(i,s,1)},a=function(e){e.preventDefault(),o.mouseListener.onMouseMove.apply(o.mouseListener,[u(e)])},f=function(e){e.preventDefault(),o.mouseListener.onMouseDown.apply(o.mouseListener,[u(e)])},l=function(e){e.preventDefault(),o.mouseListener.onMouseUp.apply(o.mouseListener,[u(e)])};return r.domElement.addEventListener("mousemove",a,!1),r.domElement.addEventListener("mousedown",f,!1),r.domElement.addEventListener("mouseup",l,!1),o.toScreenXY=function(e,t){var r=n.width,i=n.height,s=r/2,o=i/2,u=new THREE.Projector,a=u.projectVector(e.clone(),t);return a.x=a.x*s+s,a.y=-(a.y*o)+o,a},o}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.5",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);c.onXhr&&c.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!planes.json",[],function(){return'{"warpHoles":{"2":{"id":2,"x":22,"y":32,"active":true},"8":{"id":8,"x":48,"y":52,"active":true},"64":{"id":64,"x":7,"y":35,"active":true}},"islands":{"0":{"x":0,"y":0,"width":60,"height":60,"walls":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,11,11,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,11,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,5,5,7,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,7,3,5,7,7,5,5,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,11,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,7,7,7,7,7,5,6,7,7,5,5,7,6,7,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,7,5,7,7,6,5,5,6,6,3,5,7,6,5,5,5,5,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,7,7,5,7,6,5,6,5,5,5,6,5,7,7,7,5,5,5,5,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,11,11,11,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,7,7,7,5,5,6,5,5,6,3,3,5,6,5,5,5,5,5,7,7,7,7,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,11,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,7,7,5,7,5,5,5,5,3,3,3,3,3,3,3,5,5,5,6,5,5,7,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,7,5,5,6,6,3,5,3,3,6,6,6,3,3,3,15,6,5,5,5,7,7,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,7,5,5,5,6,3,6,3,6,6,3,3,3,15,15,15,3,6,7,7,7,7,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,7,7,7,5,5,3,6,3,6,6,3,15,15,15,3,6,6,3,7,7,7,7,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,7,5,5,5,5,3,15,15,6,3,3,15,15,3,6,6,7,7,7,7,7,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,7,5,3,5,5,15,15,15,6,6,6,6,15,3,6,6,7,5,5,5,7,7,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,7,5,5,3,3,15,15,15,3,6,6,15,15,3,3,6,7,7,7,5,5,7,0,0,0,0,0,0,0,0,0,1,1,1,1,11,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,7,7,7,7,5,3,15,15,15,6,15,15,3,3,5,5,6,7,5,5,7,7,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,7,7,5,6,5,6,15,15,15,7,3,3,3,5,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,7,7,7,7,7,7,7,15,15,7,7,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,11,11,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,11,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,7,14,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,7,7,5,7,7,7,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,15,15,15,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,7,7,5,6,6,6,5,5,5,5,6,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,15,0,0,0,15,15,0,0,0,0,0,0,0,0,1,1,1,1,1,1,11,0,0,0,7,7,7,7,5,6,6,6,5,5,5,5,5,6,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,15,0,0,0,15,15,15,0,0,1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,7,5,5,6,6,6,5,5,5,5,5,5,5,6,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,15,15,15,0,0,0,0,0,15,15,15,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,7,5,14,6,14,5,5,5,14,14,5,5,5,6,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,15,0,15,15,13,13,0,0,0,0,0,0,1,1,1,0,0,0,7,5,5,6,3,5,7,3,5,8,14,14,5,6,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,15,0,0,0,0,0,0,0,0,15,0,1,15,13,0,0,0,0,0,0,0,1,1,1,0,0,7,7,0,5,6,6,14,7,6,7,14,7,5,5,6,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,15,0,0,0,0,0,0,0,15,15,15,0,1,1,13,13,0,0,0,0,0,1,1,1,0,0,0,7,5,5,5,6,5,5,5,5,7,8,7,5,14,6,6,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,13,13,13,0,0,0,0,0,15,15,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,5,5,5,6,5,15,15,5,7,7,5,5,8,14,6,6,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,13,0,13,0,0,0,0,0,15,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,3,3,14,6,5,5,15,5,5,3,3,5,14,14,14,6,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,7,7,6,5,5,15,15,5,3,7,5,5,7,14,6,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1,0,0,0,0,7,6,5,5,15,7,3,3,3,3,5,3,6,6,6,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,11,1,1,0,0,1,1,0,0,0,0,6,6,5,5,15,3,7,15,3,3,5,5,14,6,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,1,0,0,0,0,0,6,5,5,5,15,15,3,15,3,3,3,6,6,6,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,0,0,0,0,0,6,6,3,5,7,15,15,3,3,14,6,6,6,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,6,6,3,15,15,7,15,3,7,6,6,6,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,6,6,6,15,15,15,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,11,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,11,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,15,0,0,0,0,13,0,13,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,15,15,0,15,15,15,15,0,13,13,13,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,11,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,15,0,0,15,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,15,0,0,0,0,0,0,0,0,15,15,15,15,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,11,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,11,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"items":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"filterables":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}} '}),define("planes",["text!planes.json"],function(e){var t=0,n=function(e){return e.map(function(e){return{name:e>0?t++:undefined,type:e}})},r=JSON.parse(e),i=r.islands,s=r.warpHoles,o={};for(var u in i){var a=i[u],f={id:u,width:a.width,height:a.height,walls:n(a.walls),items:n(a.items),filterables:n(a.filterables)};o[u]=f}var l=function(){return JSON.stringify({warpHoles:s,islands:i})};return{toJSON:l,islands:i,warpHoles:s,getIsland:function(e){return o[e]}}}),define("inventory",[],function(){var e={1:function(){return{id:1,name:"coin"}},2:function(){return{id:2,name:"redfilter"}},3:function(){return{id:3,name:"spacesuit"}},4:function(){return{id:4,name:"dance shoes"}}},t=function(t){var n=e[t];return n?n():undefined};return{items:e,getItem:t}}),define("hud",[],function(){var e=[],t=function(t,n){var r=document.createElement("div");r.style.position="absolute",r.style.zIndex=1e3,r.innerHTML=n,document.getElementById("output").appendChild(r),e.push({element:r,object:t})},n=function(t){e=e.filter(function(e){return e.object.name===t.name?(document.getElementById("output").removeChild(e.element),!1):!0})},r=function(){var t=document.getElementById("output");e.forEach(function(e){t.removeChild(e.element)}),e=[]},i=function(t,n){e.forEach(function(e){var r=e.object.matrixWorld.getPosition(),i=t.toScreenXY(r,n);e.element.style.left=i.x+"px",e.element.style.top=i.y+"px"})};return{addTag:t,removeTag:n,removeAllTags:r,positionTags:i}}),define("map",["./planes","./inventory","./hud"],function(e,t,n){var r=function(e,t){return new THREE.Mesh(new THREE.PlaneGeometry(t.width,t.height),new THREE.MeshLambertMaterial({wireframe:!1,color:e.color,side:THREE.DoubleSide}))},i=function(e,t){var n=new THREE.Mesh(new THREE.PlaneGeometry(t.width,t.height),new THREE.MeshLambertMaterial({wireframe:!1,color:e.color,side:THREE.FrontSide}));return n},s=function(e){return e},o=!1,u=function(e){o=e},a=function(e){return console.log(o),e===2&&o?0:e},f=function(e,t){return new THREE.Mesh(new THREE.CubeGeometry(t.width/2,t.height/2,t.depth),new THREE.MeshLambertMaterial({emissive:e.color,color:e.color}))},l=function(e,t,n,r,i){var s=d.getCell(e,t,n);if(s.type===0)return undefined;var o=p[e][s.type].stack,u=o.meshGenerator(o,r);return u.name=s.name,u.description=p[e][s.type].description,u},c=function(e){for(var t in p){var n=p[t];for(var r in n){var i=n[r];h(e,i)}}},h=function(e,t){e.forEach(function(e){var n=t[e];if(n){var r={description:n.description,color:n.color,meshGenerator:n.meshGenerator,filterer:n.filterer};t.stack=n}})},p=function(){return{filterables:{2:{eye:{description:"red-invisible wall",color:8914952,meshGenerator:r,filterer:s},red:{description:"red-invisible wall",color:15658734,meshGenerator:i,filterer:a},stack:undefined}},walls:{1:{eye:{description:"impermeable wall",color:8947848,meshGenerator:r,filterer:s},stack:undefined},2:{eye:{description:"red-invisible wall",color:8914952,meshGenerator:r,filterer:s},stack:undefined},3:{eye:{description:"impermeable wall",color:13296789,meshGenerator:r,filterer:s},stack:undefined},4:{eye:{description:"impermeable wall",color:11655268,meshGenerator:r,filterer:s},stack:undefined},5:{eye:{description:"impermeable wall",color:10079283,meshGenerator:r,filterer:s},stack:undefined},6:{eye:{description:"impermeable wall",color:5098547,meshGenerator:r,filterer:s},stack:undefined},7:{eye:{description:"impermeable wall",color:3394662,meshGenerator:r,filterer:s},stack:undefined},8:{eye:{description:"impermeable wall",color:3394739,meshGenerator:r,filterer:s},stack:undefined},9:{eye:{description:"impermeable wall",color:3381708,meshGenerator:r,filterer:s},stack:undefined},10:{eye:{description:"impermeable wall",color:3362252,meshGenerator:r,filterer:s},stack:undefined},11:{eye:{description:"impermeable wall",color:11507172,meshGenerator:r,filterer:s},stack:undefined},12:{eye:{description:"impermeable wall",color:9135320,meshGenerator:r,filterer:s},stack:undefined},13:{eye:{description:"impermeable wall",color:6697932,meshGenerator:r,filterer:s},stack:undefined},14:{eye:{description:"impermeable wall",color:13415219,meshGenerator:r,filterer:s},stack:undefined},15:{eye:{description:"impermeable wall",color:13395507,meshGenerator:r,filterer:s},stack:undefined},16:{eye:{description:"impermeable wall",color:13382477,meshGenerator:r,filterer:s},stack:undefined},17:{eye:{description:"impermeable wall",color:13382553,meshGenerator:r,filterer:s},stack:undefined},18:{eye:{description:"impermeable wall",color:11744204,meshGenerator:r,filterer:s},stack:undefined}},items:{1:{eye:{description:"coin",color:248,meshGenerator:f},description:"coin",stack:undefined},2:{eye:{description:"redfilter",color:16253176,meshGenerator:f},description:"redfilter",stack:undefined},3:{eye:{description:"spacesuit",color:16316431,meshGenerator:f},description:"spacesuit",stack:undefined},4:{eye:{description:"dance shoes",color:8919215,meshGenerator:f},description:"dance shoes",stack:undefined}}}}();c(["eye"]);var d=function(){var t=function(t,n,r){var i=e.getIsland(0);return i[t][r*i.width+n]},n=function(e,n,r,i){var s=t(e,n,r);s.type=i};return{planes:e.processed,getCell:t,setCell:n}}(),v=function(){var e=[],t=function(t){e.push(t)},n=function(t){e=e.filter(function(e){return e!==t})},r=function(t){e.forEach(function(e){e.removeTileObjectNamed(t.name)})},i=function(e){c(e),s()},s=function(){e.forEach(function(e){e.reRenderFilterables()})},o=function(){e.forEach(function(e){e.reRenderItems()})};return{add:t,remove:n,removeTileObjectIfPresent:r,applyFilter:i,reRenderItems:o}}(),m=function(e,t,r,i,s,o,u){var a=new THREE.Object3D,f=s,c=o,h=e/f,p=t/c,d=.01,m=i,g={width:h,height:p,depth:d},y=m.x-Math.floor(f/2);y=y>=0?y:0;var b=m.y-Math.floor(c/2);b=b>=0?b:0;var w=function(e){return(e-m.x)*h},E=function(e){return(m.y-e)*p},S=function(){return r},x={},T=function(e){var t=x[e];t.parent.remove(t),C(e)},N=function(){var e=x.items;k=k.filter(function(e){return n.removeTag(e),!1}),e.parent.remove(e),C("items",function(e){k.push(e),n.addTag(e,e.description)})},C=function(e,t){var n=new THREE.Object3D;x[e]=n;for(var r=b;r<b+c;r++)for(var i=y;i<y+f;i++){var s=l(e,i,r,g,u);s&&(s.position.set(w(i),E(r),S()),n.add(s),t&&t(s))}a.add(n)};C("walls"),C("filterables");var k=[];C("items",function(e){k.push(e)});var L=function(e){return e.x>=y&&e.x<y+c&&e.y>=b&&e.y<b+f},A=function(e,t){return{x:w(e),y:E(t),z:S()}},O=function(e){var t=a.getChildByName(e,!0);t&&(console.log("removing",t.description),k=k.filter(function(e){return e.name==t.name?(n.removeTag(t),!1):!0}),t.parent.remove(t))},M=function(){k.forEach(function(e){n.addTag(e,e.description)})},_=function(){k.forEach(function(e){n.removeTag(e)})},D={containsPoint:L,computePosition:A,removeTileObjectNamed:O,tileWidth:h,tileHeight:p,close:function(){_(),v.remove(this)},reRenderFilterables:function(){T("filterables")},reRenderItems:N,model:a,activate:M,deactivate:_};return v.add(D),D},g=function(e){var t=d.getCell("walls",e.x,e.y);if(t.type!==0){var n=p.walls[t.type].stack.filterer,r=n(t.type);return r===0}t=d.getCell("filterables",e.x,e.y);if(t.type!==0){var n=p.filterables[t.type].stack.filterer,r=n(t.type);return r===0}return!0},y=function(e){var n=d.getCell("items",e.x,e.y),r=t.getItem(n.type);return r&&(n.type=0,v.removeTileObjectIfPresent(n)),r},b=function(e,t){var n=d.getCell("items",e.x,e.y);n.type!==0?console.log("item already present at this location.",e.x,e.y,n.type):d.setCell("items",e.x,e.y,t.id)};return{createObject:m,getItem:y,setItem:b,isOpenPosition:g,applyFilterToMapObjects:v.applyFilter,reRenderItems:v.reRenderItems,WarpHolePoints:e.warpHoles,setShadowWorld:u}}),define("input",[],function(){var e=function(t,n,r){this.action=n,this.timing=r?r:{expiration:15,recovery:0},this.looped=undefined,this.branch={},this.clear=function(){this.looped=!1,this.branch={}},this.getTiming=function(e){return e.expiration=this.timing.expiration,e.recovery=this.timing.recovery,e},this.get=function(e){return this.branch[e]},this.add=function(t,n,r){var i=new e(t,n,r);return this.branch[t]=i,i},this.loop=function(e){this.looped=e},this.seek=function(e){var t=this.branch[e.shift()];return t?t.seek(e):this}},t=function(){function i(){return n.getTiming(r),a.firePlayAction.apply(a,[n.action]),n.looped?n.looped:n}function s(e){if(!u)return;if(r.recovery>0)return;n=n.get(e),n?n=i():(n=t.get(e),n=n?i():t)}function o(e){}var t=new e,n=t,r=t.getTiming({}),u=!1,a=undefined;return{initialize:function(){this.reset(),u=!1},getRootAction:function(){return t},setActionDelegate:function(e){a=e},enable:function(){u=!0,this.reset()},disable:function(){u=!1},reset:function(){n=t,n.getTiming(r)},inputOn:function(e){s(e)},inputOff:function(e){o(e)},advance:function(){r.recovery>0?--r.recovery===0&&a.firePlayAction("RECOVERED"):r.expiration>0&&--r.expiration===0&&(a.firePlayAction("EXPIRED"),n=t,n.getTiming(r))}}}(),n=function(){function n(t,n){if(e[t])return;e[t]=!0,n.inputOn.apply(n,[t])}function r(t,n){e[t]&&n.inputOff.apply(n,[t]),e[t]=!1}function s(e){if(i[e])return n(i[e],t),!1;console.log("unmapped key down:",e)}function o(e){if(i[e])return r(i[e],t),!1}function u(e){if(!e)var e=window.event;return s(e.keyCode)}function a(e){if(!e)var e=window.event;return o(e.keyCode)}var e={},i={76:1,75:2,74:3,73:4,32:5};return{initialize:function(){t.initialize(),document.onkeydown=u,document.onkeyup=a},advance:function(){t.advance()}}}();return{input:n,playInput:t,setActionDelegate:t.setActionDelegate,getRootAction:t.getRootAction,advance:t.advance}}),define("kit",["require","exports","module"],function(e,t){var n=document.getElementById("kit"),r=function(e,t,n){var r=document.createElement("span"),i=document.createElement("input");i.type="checkbox",i.id="kitToggle"+e,i.value=t,i.onclick=n;var s=document.createElement("label");return s.for=i.id,s.appendChild(document.createTextNode(e)),r.appendChild(i),r.appendChild(s),r},i=function(e,t,i){var s={elementToggled:function(e){i(e.srcElement.checked)}};return s.checkbox=r(e,t,s.elementToggled),n.appendChild(s.checkbox),s},s={},o=function(e,t,n){s[e]=i(e,t,n),n(t)};return{addToggle:o}}),define("player",["./map","./input","./kit"],function(e,t,n){var r=function(){var e=[],t=function(t){e.push(t)},n=function(t){e=e.filter(function(e){return e.name!==t.name})},r=function(){e.forEach(function(e){e.remove(e.getChildByName("dance shoes")),e.remove(e.getChildByName("redfilter")),e.remove(e.getChildByName("spacesuit")),e.remove(e.getChildByName("core")),e.add(f()),d&&e.add(u()),isWearingDanceShoes&&e.add(a()),h.indexOf("red")>=0&&e.add(i())})};return{add:t,remove:n,rerender:r}}(),i=function(){var e=new THREE.Mesh(new THREE.CubeGeometry(1,.1,50),new THREE.MeshLambertMaterial({color:16711680,side:THREE.DoubleSide}));return e.position.set(0,.33,-25),e.name="redfilter",e},s=function(){var e=new THREE.MeshLambertMaterial({color:16777215,transparent:!0,opacity:.5,side:THREE.DoubleSide}),t=new THREE.Mesh(new THREE.CubeGeometry(1.2,1.2,200),e);return t.name="hitbox",t},o=function(){var e=new THREE.MeshLambertMaterial({color:16776960,wireframe:!0}),t=new THREE.Mesh(new THREE.CubeGeometry(1.4,1.4,300),e);return t.name="selectionBox",t},u=function(){var e=new THREE.MeshLambertMaterial({color:16777215,opacity:.3,transparent:!0,emissive:16777215,side:THREE.DoubleSide}),t=new THREE.Mesh(new THREE.CubeGeometry(1.2,1.2,200),e);return t.name="spacesuit",t},a=function(){var e=new THREE.Object3D,t=new THREE.MeshPhongMaterial({ambient:9127187,color:9127187,specular:9127187,shininess:50,shading:THREE.SmoothShading}),n=new THREE.Mesh(new THREE.CubeGeometry(.25,.2,50),t),r=new THREE.Mesh(new THREE.CubeGeometry(.25,.2,50),t);return n.position.set(-0.33,-0.4,-50),r.position.set(.33,-0.4,-50),e.add(n),e.add(r),e.name="dance shoes",e},f=function(){var e=new THREE.Mesh(new THREE.CubeGeometry(1,1,1),new THREE.MeshLambertMaterial({color:65280,emissive:65280,side:THREE.DoubleSide}));return e.name="core",e},l=function(e,t,n){var s=new THREE.Object3D;return s.add(f()),d&&s.add(u()),h.indexOf("red")>=0&&s.add(i()),s.scale.set(t,n,.01),s.name="player_"+e,r.add(s),s.close=function(){r.remove(s)},s},c=function(e,t,n){var r=new THREE.Object3D;return r.add(s()),r.add(o()),e.name==="spacesuit"&&(r.add(u()),r.description="spacesuit"),r.scale.set(t,n,.01),r.name="inventory_"+name,r},h=["eye"],p=[],d=!1,v=function(t){h=t===!0?["eye","red"]:["eye"],r.rerender(),e.applyFilterToMapObjects(h)},m=function(e){console.log("spacesuit:",e),d=e,r.rerender()},g=function(e){console.log("wearing dance shoes:",e),isWearingDanceShoes=e,e&&w.add(5,"JUMP").add(3,"LEFT").add(1,"RIGHT").add(3,"LEFT").add(1,"RIGHT").add(5,"COMBO"),r.rerender()},y=function(e){p.push(e),console.log("item added to inventory:",e.name);if(e.name==="redfilter"){n.addToggle("redfilter",!1,v);return}if(e.name==="spacesuit"){n.addToggle("spacesuit",!1,m);return}if(e.name==="dance shoes"){n.addToggle("dance shoes",!1,g);return}},b={mapPosition:{x:26,y:32},isExtracted:!1,firePlayAction:function(t){if(b.isExtracted)return;var n={x:b.mapPosition.x,y:b.mapPosition.y};switch(t){case"RIGHT":n.x+=1;break;case"LEFT":n.x-=1;break;case"UP":n.y+=1;break;case"DOWN":n.y-=1;break;default:console.log("unknown play action:",t)}var r=e.getItem(n);r&&y(r),e.isOpenPosition(n)&&(b.mapPosition=n)},setMapPosition:function(e){b.mapPosition.x=e.x,b.mapPosition.y=e.y},addInventory:y,update:function(e){},createVirtualModel:l,createAugmentedModel:l,createInventoryModel:c,isWearingSpaceSuit:function(){return d}};t.input.initialize(),t.playInput.initialize(),t.setActionDelegate(b);var w=t.getRootAction();return w.clear(),w.add(1,"RIGHT"),w.add(3,"LEFT"),w.add(2,"UP"),w.add(4,"DOWN"),t.playInput.enable(),b}),define("video",["./detector"],function(e){var t=function(){var e=window.URL||window.webkitURL;if(!e.createObjectURL)throw new Error("URL.createObjectURL not found.");var t=function(e,t,n){var r=undefined;return navigator.getUserMedia?r=navigator.getUserMedia(e,t,n):navigator.webkitGetUserMedia?r=navigator.webkitGetUserMedia(e,t,n):navigator.mozGetUserMedia?r=navigator.mozGetUserMedia(e,t,n):navigator.msGetUserMedia?r=navigator.msGetUserMedia(e,t,n):n(new Error("No getUserMedia implementation found.")),r},n=function(t){var n=document.querySelector("video"),r=e.createObjectURL(t);n.src=r,n.play()},r=function(e){alert("Couldn't access webcam."),console.log(e)},i=document.createElement("video");i.width=640,i.height=480,i.loop=!0,i.volume=0,i.autoplay=!0,i.controls=!0;var s=document.getElementById("subsystem");s.appendChild(i),t({video:!0},n,r);var o=document.createElement("canvas");o.width=i.width,o.height=i.width*3/4;var u=o.getContext("2d");return{canvas:o,update:function(){u.drawImage(i,0,0)}}}(),n=function(e){var t=new THREE.Camera,n=new THREE.Scene,r=new THREE.Texture(e),i=new THREE.Mesh(new THREE.PlaneGeometry(2,2,0),new THREE.MeshBasicMaterial({map:r}));return i.material.depthTest=!1,i.material.depthWrite=!1,n.add(i),{update:function(){r.needsUpdate=!0},render:function(e){e.renderer.render(n,t)}}},r=n(t.canvas);return{viewReality:r,update:function(e){t.update(),r.update()},render:function(e){r.render(e)},canvas:t.canvas}}),define("detector",["./settings","./video"],function(e,t){function u(e,t){t[0]=e.m00,t[1]=-e.m10,t[2]=e.m20,t[3]=0,t[4]=e.m01,t[5]=-e.m11,t[6]=e.m21,t[7]=0,t[8]=-e.m02,t[9]=e.m12,t[10]=-e.m22,t[11]=0,t[12]=e.m03,t[13]=-e.m13,t[14]=e.m23,t[15]=1}var n=function(){var e={width:320,height:240},t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=document.getElementById("subsystem");n.appendChild(t);var r=t.getContext("2d");r.font="24px URW Gothic L, Arial, Sans-serif";var i=new NyARRgbRaster_Canvas2D(t);return{object:i,update:function(n){r.drawImage(n,0,0,e.width,e.height),t.changed=!0}}}(),r=e.FLARThreshold,i={width:320,height:240},s=new FLARParam(i.width,i.height),o=new FLARMultiIdMarkerDetector(s,120);o.setContinueMode(!0),THREE.Matrix4.prototype.setFromArray=function(e){return this.set(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])};var a=function(e){var t=new Float32Array(16);return u(e,t),t},f=function(){return i},l=function(){return o.detectMarkerLite(n.object,r)},c=function(e){var t=o.getIdMarkerData(e);if(t.packetLength>4)return-1;var n=0;for(var r=0;r<t.packetLength;r++)n=n<<8|t.getPacketData(r);return n},h=function(e,t){var n=new Float32Array(16);return s.copyCameraMatrix(n,e,t),n},p=function(e){var t=new NyARTransMatResult;return o.getTransformMatrix(e,t),a(t)},d=function(){n.update(t.canvas)};return{getMarkerNumber:c,getTransformMatrix:p,getCameraMatrix:h,getSize:f,detect:l,update:d}}),define("virtual",["./settings","./map","./player","./detector","./hud"],function(e,t,n,r,i){var s=function(){var e={};return e.model=new THREE.Object3D,e},o=s(),u={x:22,y:22},a=350,f=t.createObject(300,300,0,u,e.worldSize.width,e.worldSize.height,n.filter);f.model.position.set(0,0,0),o.model.position.set(0,0,a),o.model.add(f.model);var l=!1,c=s(),h=n.createVirtualModel("virtual",f.tileWidth,f.tileHeight);h.targetRotation=0,c.model.position.set(0,0,a);var p=function(){var e={};e.scene=new THREE.Scene,e.scene.add(o.model),e.scene.add(c.model),e.camera=new THREE.Camera,e.cameraAltitude=-600;var s=r.getCameraMatrix(10,1e4);e.camera.projectionMatrix.setFromArray(s),e.light=new THREE.PointLight(16777215),e.light.position.set(0,0,a+100),e.camera.position.set(0,0,e.cameraAltitude),e.scene.add(e.light),e.addPlayer=function(){c.model.add(h),l=!0},e.removePlayer=function(){c.model.remove(h),l=!1};var u=new THREE.Vector3(0,0,0),p=new THREE.Vector3(0,0,0),d=function(t){var r=f.computePosition(n.mapPosition.x,n.mapPosition.y);h.position.x=r.x,h.position.y=r.y,h.position.z=r.z,h.rotation.y=h.rotation.y+=(h.targetRotation-h.rotation.y)/8,h.__dirtyPosition=!0,h.__dirtyRotation=!0,h.updateMatrixWorld();var r=f.computePosition(n.mapPosition.x,n.mapPosition.y),i=c.model.localToWorld(new THREE.Vector3(r.x,r.y,r.z));u.set(-i.x,-i.y,-a+2*e.cameraAltitude),p.set(0,0,e.cameraAltitude),e.camera.position=p,e.camera.lookAt(u)};return e.update=function(t){if(l&&n.isExtracted){e.removePlayer();return}if(n.isExtracted)return;l||e.addPlayer(),d()},e.render=function(t){t.renderer.render(e.scene,e.camera),i.positionTags(t,e.camera)},e.onMouseMove=function(e){return},e.onMouseDown=function(e){console.log(e)},e.onMouseUp=function(e){console.log("mouse button up")},e.activate=function(){i.addTag(h,"character"),f.activate()},e.deactivate=function(){i.removeTag(h),f.deactivate()},e.addDeltaToCameraAltitude=function(n){e.cameraAltitude+=n;var r=e.cameraAltitude>=400;t.setShadowWorld(r),h.targetRotation=r?Math.PI:0},e.addDeltaToCameraAltitude(0),e},d=p();return d.addPlayer(),{onMouseMove:function(e){return},onMouseDown:function(e){return},onMouseUp:function(e){console.log("mouse button up")},update:function(e){d.update(e)},render:function(e){d.render(e)},addDeltaToCameraAltitude:d.addDeltaToCameraAltitude,view:d,activate:d.activate,deactivate:d.deactivate}}),define("augmented",["./settings","./map","./player","./detector","./virtual","./inventory","./hud"],function(e,t,n,r,i,s,o){var u=function(){var e={};return e.model=new THREE.Object3D,e.model.matrixAutoUpdate=!1,e.transform=function(t){e.model.matrix.setFromArray(t),e.model.matrixWorldNeedsUpdate=!0},e},a=function(){var t=function(e,t,n,r,i){var s=function(e){var t=i?new THREE.MeshLambertMaterial({color:r,emissive:r,side:THREE.DoubleSide}):new THREE.MeshLambertMaterial({color:r,side:THREE.DoubleSide}),n=new THREE.Mesh(new THREE.CubeGeometry(e.width,e.height,e.depth),t);return n.position.set(e.x,e.y,e.z),n},o={};return o.top=s({width:e+t,height:t,depth:n,x:0,y:e/2+t/2,z:n/2}),o.right=s({width:t,height:e+2*t,depth:n,x:e/2+t/2,y:0,z:n/2}),o.left=s({width:t,height:e+2*t,depth:n,x:-e/2-t/2,y:0,z:n/2}),o.bottom=s({width:e+t,height:t,depth:n,x:0,y:-e/2-t/2,z:n/2}),o},n=t(e.portalSize,e.frameSize,e.portalDepth,15793920,!1),r=t(e.portalSize*1.3,e.frameSize/2,.25,16776960,!0),i=new THREE.Object3D;i.add(r.top),i.add(r.bottom),i.add(r.right),i.add(r.left),i.position.set(0,0,-1),i.name="button",i.visible=!1;var s=new THREE.Mesh(new THREE.PlaneGeometry(e.portalSize,e.portalSize),new THREE.MeshLambertMaterial({color:1118481,side:THREE.DoubleSide}));s.position.set(0,0,e.portalDepth+.1);var o=new THREE.Mesh(new THREE.PlaneGeometry(e.portalSize,e.portalSize),new THREE.MeshLambertMaterial({transparent:!0,opacity:0,color:16777215,side:THREE.DoubleSide}));o.position.set(0,0,0);var a=u();return a.model.add(n.top),a.model.add(n.bottom),a.model.add(n.left),a.model.add(n.right),a.model.add(s),a.model.add(o),a.model.add(i),a.hitbox=o,a},f=function(){var t=.5,n=function(e){var t=new THREE.Mesh(new THREE.PlaneGeometry(e.width,e.height),new THREE.MeshLambertMaterial({color:15793920,side:THREE.DoubleSide}));return t.position.set(e.x,e.y,e.z),t.rotation.y=e.ry,t.rotation.x=e.rx,t},r=n({width:e.portalSize+2*(e.frameSize+t),height:e.portalDepth,x:0,y:e.portalSize/2+e.frameSize+t,z:e.portalDepth/2,ry:0,rx:Math.PI/2}),i=n({width:e.portalSize+2*(e.frameSize+t),height:e.portalDepth,x:0,y:-(e.portalSize/2+e.frameSize+t),z:e.portalDepth/2,ry:0,rx:Math.PI/2}),s=n({width:e.portalDepth,height:e.portalSize+2*(e.frameSize+t),x:e.portalSize/2+e.frameSize+t,y:0,z:e.portalDepth/2,ry:Math.PI/2,rx:0}),o=n({width:e.portalDepth,height:e.portalSize+2*(e.frameSize+t),x:-(e.portalSize/2+e.frameSize+t),y:0,z:e.portalDepth/2,ry:Math.PI/2,rx:0}),a=u();return a.model.add(r),a.model.add(i),a.model.add(o),a.model.add(s),a},l=function(r,i,s){var o={};o.id=s,o.frame=a(),o.occluder=f(),o.mapContainer=u();var l=t.createObject(r,i,e.portalDepth,t.WarpHolePoints[s],e.warpHoleColumns,e.warpHoleRows,n.filter);o.mapContainer.model.add(l.model),l.activate();var c=!1;o.playerContainer=u();var h=n.createVirtualModel("warphole"+s,l.tileWidth,l.tileHeight);o.transform=function(e){o.mapContainer.transform(e),o.frame.transform(e),o.playerContainer.transform(e),o.occluder.transform(e)},o.intersectsRay=function(e){var t=e.intersectObject(o.frame.hitbox);return t.length>0},o.setHighlight=function(e){var t=o.frame.model.getChildByName("button",!0);t.traverse(function(t){t.visible=e})};var p=function(){if(!c)return;var e=l.computePosition(n.mapPosition.x,n.mapPosition.y);h.position.x=e.x,h.position.y=e.y,h.position.z=e.z,h.__dirtyPosition=!0,h.updateMatrixWorld()},d=function(){m(),n.setMapPosition(t.WarpHolePoints[o.id])},v=function(e){t.setItem(t.WarpHolePoints[o.id],e),t.reRenderItems()},m=function(){o.playerContainer.model.add(h),c=!0},g=function(){o.playerContainer.model.remove(h),c=!1};return o.update=function(e){if(c){if(n.isExtracted){g();return}if(!o.containsPlayerMapPosition()){g();return}}if(n.isExtracted)return;!c&&o.containsPlayerMapPosition()&&m(),p()},o.close=function(){h.close(),l.close()},o.containsPlayerMapPosition=function(){return l.containsPoint(n.mapPosition)},o.insertPlayer=d,o.removePlayer=g,o.insertItem=v,o},c=function(e,t){var n=t.getChildByName("hitbox"),r=t.getChildByName("selectionBox"),i=function(e){var t=e.intersectObject(n);return t.length>0},s=function(e){r.visible=e},o=function(){return r.visible};s(!1);var u={item:e,model:t,setSelected:s,isSelected:o,intersectsRay:i};return u},h=function(){var e=new THREE.Scene,t=new THREE.Scene,i=10,u=new THREE.Camera,a=r.getCameraMatrix(10,1e4);u.projectionMatrix.setFromArray(a);var f=[],h=!1,p=n.createAugmentedModel("extracted",i,i),v=s.getItem(3),m=n.createInventoryModel(v,i,i),g=c(v,m),y=[],b=function(t){f.push(t),y.push(t.model),e.add(t.model)},w=function(t){f=f.filter(function(e){e!==t}),y=y.filter(function(e){return e.name==t.model.name?(o.removeTag(e),!1):!0}),e.remove(t.model)};b(g);var E=function(){if(!h)return;var e=new THREE.Vector3(0,-32.75+i/2,250);p.position.x=e.x,p.position.y=e.y,p.position.z=e.z,p.rotation.y+=Math.PI/360,p.__dirtyPosition=!0,p.updateMatrixWorld()},S=function(){var e=new THREE.Vector3(3*i,-32.75+i/2,250);m.position.x=e.x,m.position.y=e.y,m.position.z=e.z,m.rotation.y+=Math.PI/360,m.__dirtyPosition=!0,m.updateMatrixWorld()},x=function(){e.add(p),h=!0,n.isExtracted=!0},T=function(){e.remove(p),h=!1,n.isExtracted=!1},N=function(e){f.forEach(function(t){t.isSelected()&&(e.insertItem(t.item),w(t))}),h&&n.isWearingSpaceSuit()?(e.insertPlayer(),T()):e.containsPlayerMapPosition()&&n.isWearingSpaceSuit()&&(e.removePlayer(),x())},C=function(){var e=new THREE.Mesh(new THREE.CubeGeometry(100,2.5,50),new THREE.MeshLambertMaterial({color:65280,side:THREE.DoubleSide}));return e},k=C();k.position.set(0,-35,250),e.add(k);var L=new THREE.PointLight(13421772);L.position.set(0,-1e3,5e3),e.add(L);var A={},O=new THREE.Projector,M=function(e,t,n){var r=3;for(var i=0;i<e.length;i++)t[i]+=(e[i]-t[i])/r;return t},_=function(e){var t=r.detect();for(var n=0;n<t;n++){var i=r.getMarkerNumber(n),s=A[i],o=r.getTransformMatrix(n);s||(s=l(100,100,i),s.filtered=new Float32Array(16),s.filtered.set(o),D(s)),s.age=0,s.transformMatrix=o}for(var u in A){var s=A[u];if(s.age>1)P(s);else{s.age++;var a=M(s.transformMatrix,s.filtered,e);s.update(e),s.transform(a)}}},D=function(n){A[n.id]=n,e.add(n.frame.model),e.add(n.mapContainer.model),e.add(n.playerContainer.model),t.add(n.occluder.model)},P=function(n){n.close(),e.remove(n.frame.model),e.remove(n.mapContainer.model),e.remove(n.playerContainer.model),t.remove(n.occluder.model),delete A[n.id]},H=function(e){var t=e.clone();O.unprojectVector(t,u);var n=new THREE.Raycaster(u.position,t.sub(u.position).normalize());for(var r in A){var i=A[r],s=i.intersectsRay(n);i.setHighlight(s)}};return{checkIntersection:function(e){O.unprojectVector(e,u);var t=new THREE.Raycaster(u.position,e.sub(u.position).normalize());for(var n in A){var r=A[n];r.intersectsRay(t)&&N(r)}f.forEach(function(e){e.setSelected(e.intersectsRay(t))})},addPlayer:x,removePlayer:T,update:function(e){E(),S(),r.update(),_(e),H(d)},render:function(n){n.beginOccluderRendering(),n.renderer.render(t,u),n.endOccluderRendering(),n.renderer.render(e,u),o.positionTags(n,u)},activate:function(){y.forEach(function(e){o.addTag(e,e.description)})},deactivate:function(){y.forEach(function(e){o.removeTag(e)})}}},p=h(),d=new THREE.Vector3(0,0,0);return{onMouseMove:function(e){d=e},onMouseDown:function(e){p.checkIntersection(e)},onMouseUp:function(e){console.log("mouse button up")},update:function(e){p.update(e)},render:function(e){p.render(e)},activate:p.activate,deactivate:p.deactivate}}),define("profiler",["./detector"],function(e){var t=new Stats;t.setMode(0),t.domElement.style.position="absolute",t.domElement.style.zIndex="1000",t.domElement.style.left="0px",t.domElement.style.top="0px",document.body.appendChild(t.domElement);if(DEBUG){var n=document.createElement("canvas");n.id="debugCanvas",n.width=e.getSize().width+1,n.height=e.getSize().height,document.getElementById("subsystem").appendChild(n)}return{startSample:t.begin,endSample:t.end}}),define("earth",["domReady!"],function(e){var t=document.getElementById("googleMap"),n=function(e){t.style.visibility=e?"visible":"hidden"};if(typeof google!="object"||typeof google.maps!="object")return console.log("Failed to load google maps api. Maps will not work."),{show:function(){n(!0)},hide:function(){n(!1)}};var r=new google.maps.LatLng(-25.363882,131.044922),i={center:new google.maps.LatLng(-34.397,150.644),zoom:1,mapTypeId:google.maps.MapTypeId.ROADMAP},s=new google.maps.Map(document.getElementById("googleMap"),i),o=new google.maps.Marker({position:r,map:s,title:"warphole #64"});return{activate:function(){n(!0)},deactivate:function(){n(!1)}}}),requirejs(["./settings","./display","./player","./augmented","./virtual","./video","./profiler","./earth","./input"],function(e,t,n,r,i,s,o,u,a){console.log("IMPORTANT: Firefox Aurora users: set media.navigator.enabled to TRUE in about:config");var f=function(){var e=[],o=0,f=undefined,l=undefined,c=function(e,t,n,r){var i=document.createElement("span"),s=document.createElement("input");s.type="radio",s.id="radio"+t,s.name=e,s.value=t,s.checked=r,s.onclick=n;var o=document.createElement("label");return o.for=s.id,o.appendChild(document.createTextNode(t)),i.appendChild(s),i.appendChild(o),i},h=function(){var e=c("mode","virtual",m,!0),t=c("mode","augmented",v,!1),n=c("mode","earth",g,!1);document.getElementById("controls").appendChild(e),document.getElementById("controls").appendChild(t),document.getElementById("controls").appendChild(n),document.getElementById("raiseVirtualCamera").onclick=function(e){i.addDeltaToCameraAltitude(-100)},document.getElementById("lowerVirtualCamera").onclick=function(e){i.addDeltaToCameraAltitude(100)}},p=undefined,d=function(e){p&&p.deactivate(),p=e,e.activate()},v=function(){d(r),f=y,l=b,t.mouseListener=r},m=function(){d(i),f=w,l=E,t.mouseListener=i},g=function(){d(u)},y=function(e){s.update(e),r.update(e)},b=function(){t.renderer.clear(),s.render(t),r.render(t)},w=function(e){i.update(e)},E=function(){t.renderer.clear(),i.render(t)},S=function(){l()},x=function(e){a.advance(),n.update(e),f(e)};return t.mouseListener=this,h(),m(),{render:S,update:x}}(),l=function(e){requestAnimationFrame(l),o.startSample(),f.update(e),f.render(),o.endSample()};l()}),define("application",function(){});